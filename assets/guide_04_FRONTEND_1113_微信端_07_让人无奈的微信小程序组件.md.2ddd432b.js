import{_ as s,c as a,o as n,a as l}from"./app.72bf9abe.js";const C=JSON.parse('{"title":"è®©äººæ— å¥ˆçš„å¾®ä¿¡å°ç¨‹åºç»„ä»¶","description":"","frontmatter":{},"headers":[],"relativePath":"guide/04_FRONTEND/1113_å¾®ä¿¡ç«¯/07_è®©äººæ— å¥ˆçš„å¾®ä¿¡å°ç¨‹åºç»„ä»¶.md","lastUpdated":1671534361000}'),p={name:"guide/04_FRONTEND/1113_å¾®ä¿¡ç«¯/07_è®©äººæ— å¥ˆçš„å¾®ä¿¡å°ç¨‹åºç»„ä»¶.md"},o=l(`<h1 id="è®©äººæ— å¥ˆçš„å¾®ä¿¡å°ç¨‹åºç»„ä»¶" tabindex="-1">è®©äººæ— å¥ˆçš„å¾®ä¿¡å°ç¨‹åºç»„ä»¶ <a class="header-anchor" href="#è®©äººæ— å¥ˆçš„å¾®ä¿¡å°ç¨‹åºç»„ä»¶" aria-hidden="true">#</a></h1><blockquote><p>æœ¬æ–‡ç›¸å…³ä»£ç åœ°å€ï¼š<a href="https://github.com/imondo/mini-apps" target="_blank" rel="noreferrer">github</a></p></blockquote><p><br>æœ€è¿‘å¼€å‘å¾®ä¿¡å°ç¨‹åºç¢°åˆ°äº†è›®å¤šé—®é¢˜ï¼Œå°¤å…¶æ˜¯å°ç¨‹åºé‡Œé¢çš„ä¸€äº›ç»„ä»¶ï¼Œå®åœ¨æ˜¯è®©äººæ„Ÿè§‰å³æ»¡å¿ƒæ¬¢å–œåˆæ— å¥ˆæ— è¯­ã€‚<br></p><p><a name="UqbHc"></a></p><h2 id="web-view" tabindex="-1">web-view <a class="header-anchor" href="#web-view" aria-hidden="true">#</a></h2><p>è¿™ä¸ªæ˜¯é¦–å½“å…¶å†²çš„ç»„ä»¶äº†ï¼Œä¸šåŠ¡éƒ¨åˆ†åœºæ™¯ä¸­æ˜¯ä½¿ç”¨çš„ H5 é¡µé¢ï¼Œå°¤å…¶æ˜¯æ´»åŠ¨é¡µé¢æ˜¯å˜åŒ–æœ€é¢‘ç¹çš„ï¼Œæ‰€ä»¥æŸ¥çœ‹<a href="https://developers.weixin.qq.com/miniprogram/dev/component/web-view.html" target="_blank" rel="noreferrer">å°ç¨‹åºæ–‡æ¡£</a>ï¼Œæœ‰è¿™ä¸ªç»„ä»¶çœŸæ˜¯è®©äººæ¬£å–œï¼›ä¸è¿‡é«˜å…´å¤ªæ—©äº†ã€‚<br><br>å…¶é€šä¿¡æœºåˆ¶çœŸæ˜¯è®©äººæ— å¯å¥ˆä½•ï¼š<br><br><img src="https://cdn.nlark.com/yuque/0/2020/png/124135/1596614548712-58af743b-01b3-44cc-9cc2-97320a4a0888.png#align=left&amp;display=inline&amp;height=560&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=560&amp;originWidth=1066&amp;size=53360&amp;status=done&amp;style=none&amp;width=1066" alt="image.png">å¯ä»¥çœ‹åˆ°ç»„ä»¶é™åˆ¶æœ‰ä¸‰ç‚¹ï¼š</p><ul><li>è‡ªåŠ¨é“ºæ»¡æ•´ä¸ªå°ç¨‹åºé¡µé¢</li><li>å¯¼èˆªæ ä¸å¯ä»¥è‡ªå®šä¹‰</li><li>ä¸¤è¾¹é€šä¿¡éœ€è¦ç‰¹å®šçš„åœºæ™¯</li></ul><p><br>å°ç¨‹åºç»™ <code>H5</code> å‘é€æ¶ˆæ¯å®¹æ˜“å®ç°ï¼Œå¯ä»¥ç›´æ¥åœ¨è®¿é—®é“¾æ¥ä¸Šå¸¦ä¸Šæˆ‘ä»¬éœ€è¦çš„å‚æ•°æ¶ˆæ¯</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">web-view</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">test.html?id=2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#FFCB6B;">web-view</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>ä½†æ˜¯H5ç»™å°ç¨‹åºå‘é€æ¶ˆæ¯åˆ™éœ€è¦åœ¨ç‰¹å®šçš„åœºæ™¯ï¼š<strong>åé€€ã€é”€æ¯ã€åˆ†äº«</strong>ä¸‰ä¸ªåœºæ™¯é¡µé¢æ‰èƒ½ä¸å°ç¨‹åºé€šä¿¡ã€‚æ„æ€å°±æ˜¯æ²¡æœ‰å‘ç”Ÿä¸Šé¢ä¸‰ä¸ªåœºæ™¯çš„æƒ…å†µä¸‹ï¼Œå°ç¨‹åºæ˜¯æ— æ³•é€šè¿‡ <code>bindmessage</code> è¿™ä¸ªäº‹ä»¶è·å–åˆ°é¡µé¢æ¶ˆæ¯ã€‚</p><p>æˆ‘ä»¬å¤§éƒ¨åˆ†åœºæ™¯ä¸‹æ˜¯éœ€è¦å®æ—¶é€šä¿¡ï¼Œè¿™é‡Œä½¿ç”¨<strong>åé€€</strong>è¿™ä¸ªåœºæ™¯æ¥å®ç°å®æ—¶é€šä¿¡ï¼Œä½†æ˜¯è¿™ä¸ªå…¶å®æ˜¯ç‰ºç‰²äº†ç”¨æˆ·ä½“éªŒï¼š<br><br><img src="https://cdn.nlark.com/yuque/0/2020/png/124135/1596697447063-382e72d5-c080-4cf0-b2e1-363722c94c6d.png#align=left&amp;display=inline&amp;height=404&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=539&amp;originWidth=208&amp;size=16027&amp;status=done&amp;style=none&amp;width=156" alt="image.png"><br><a name="nzXn4"></a></p><h3 id="ä¸­é—´é¡µé¢-middle" tabindex="-1">ä¸­é—´é¡µé¢ middle <a class="header-anchor" href="#ä¸­é—´é¡µé¢-middle" aria-hidden="true">#</a></h3><p><br>åˆ©ç”¨ä¸­é—´é¡µé¢ <code>onLoad</code> ä¸­æ¥æ”¶å‚æ•° <code>options</code> ï¼Œå†æ ¹æ® <code>getCurrentPages</code> è·å–åˆ°éœ€è¦è¿”å›åˆ°é¡µé¢ï¼Œè®¾ç½®éœ€è¦çš„æ¶ˆæ¯<br></p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">onLoad</span><span style="color:#A6ACCD;">(options) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">pages</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">getCurrentPages</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">middleæ¶ˆæ¯ï¼š</span><span style="color:#89DDFF;">\`</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">options</span><span style="color:#F07178;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">webviewPage</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">pages</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">pages</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">2</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">webviewPage</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setData</span><span style="color:#F07178;">(</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        options</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">options</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">wx</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">navigateBack</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">          delta</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    )</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p><a name="nDsYY"></a></p><h3 id="ç›®æ ‡é¡µé¢è·å–æ¶ˆæ¯" tabindex="-1">ç›®æ ‡é¡µé¢è·å–æ¶ˆæ¯ <a class="header-anchor" href="#ç›®æ ‡é¡µé¢è·å–æ¶ˆæ¯" aria-hidden="true">#</a></h3><p>ç”±äºé€šè¿‡ <code> middle</code> é¡µé¢è®¾ç½®äº† <code>data</code> æ•°æ® <code>options</code> æ‰€ä»¥å¯ä»¥åœ¨ç¨‹åºå†…è®¿é—®åˆ°å®æ—¶çš„é€šä¿¡æ¶ˆæ¯</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">onShow</span><span style="color:#A6ACCD;">() </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">setData</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      src</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">https://imondo.cn/files/web.html</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">webé¡µï¼š</span><span style="color:#89DDFF;">\`</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">options</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">options</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">wx</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">showModal</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">          title</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">msg</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®é™…æ•ˆæœï¼š<br><img src="https://cdn.nlark.com/yuque/0/2020/gif/124135/1596698619066-330a6819-433a-4aee-858d-a3de5c8254bd.gif#align=left&amp;display=inline&amp;height=423&amp;margin=%5Bobject%20Object%5D&amp;name=view.gif&amp;originHeight=564&amp;originWidth=317&amp;size=58936&amp;status=done&amp;style=none&amp;width=238" alt="view.gif"><br></p><p><a name="4OY9c"></a></p><h2 id="scroll-view" tabindex="-1">scroll-view <a class="header-anchor" href="#scroll-view" aria-hidden="true">#</a></h2><p>è¿™ä¸ªæ»šåŠ¨åŒºåŸŸç»„ä»¶ï¼Œåº”è¯¥æ˜¯æˆ‘ä»¬çœŸå¸¸ç”¨çš„ç»„ä»¶ï¼Œä½†æ˜¯å®ƒç«–å‘æ»šåŠ¨çš„æ—¶å€™ï¼Œä¸€å®šè¦ç»™å®ƒè®¾ä¸€ä¸ª<strong>å›ºå®šé«˜åº¦å€¼</strong>ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªå¥‡è‘©çš„è®¾å®šã€‚<br>å¹¸å¥½å°ç¨‹åºæœ‰ <a href="https://developers.weixin.qq.com/miniprogram/dev/api/wxml/wx.createSelectorQuery.html" target="_blank" rel="noreferrer">wx.createSelectorQuery</a> è¿™ä¸ª API æ¥åŠ¨æ€è§£å†³å®ƒçš„é«˜åº¦ï¼š</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">// view</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">class</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">head</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">Head</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">scroll-view</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">scroll-y</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">true</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">style</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">height: {{scollHeight}}px</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">block</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">wx</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">for</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">{{20}}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">wx</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">key</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">index</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">class</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">scroll-item</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">item</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">block</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#FFCB6B;">scroll-view</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// js</span></span>
<span class="line"><span style="color:#82AAFF;">onShow</span><span style="color:#A6ACCD;">() </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">system</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">wx</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getSystemInfoSync</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// ç³»ç»Ÿé«˜åº¦</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">height</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">system</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">windowHeight</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">queryEl</span><span style="color:#F07178;">([</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">.head</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">])</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">rect</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">[{</span><span style="color:#F07178;"> height</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">ht</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}]</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">rect</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">setData</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      scollHeight</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">height</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">ht</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toFixed</span><span style="color:#F07178;">(</span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#82AAFF;">queryEl</span><span style="color:#A6ACCD;">(selector) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">resolve</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">query</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">wx</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createSelectorQuery</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// å¦‚æœæ˜¯åœ¨ component å†…éœ€è¦ä½¿ç”¨ .in(this)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">Array</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">isArray</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">selector</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">selector</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">forEach</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">el</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">query</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">select</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">el</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">boundingClientRect</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">query</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">select</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">selector</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">boundingClientRect</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">query</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">exec</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">res</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">res</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>å®é™…æ•ˆæœå¦‚ä¸‹ï¼š<br><img src="https://cdn.nlark.com/yuque/0/2020/gif/124135/1596700442615-70f2b336-065f-4e5a-9faf-34349a86b018.gif#align=left&amp;display=inline&amp;height=423&amp;margin=%5Bobject%20Object%5D&amp;name=scroll.gif&amp;originHeight=564&amp;originWidth=317&amp;size=109055&amp;status=done&amp;style=none&amp;width=238" alt="scroll.gif"><a name="e5zSd"></a></p><h2 id="æ€»ç»“" tabindex="-1">æ€»ç»“ <a class="header-anchor" href="#æ€»ç»“" aria-hidden="true">#</a></h2><p>å°ç¨‹åºçš„ç»„ä»¶ä½¿ç”¨è¿‡ç¨‹ä¸­å…¶å®æ–‡æ¡£ä¸­éƒ½æåˆ°äº†ç›¸å…³çš„æ³¨æ„åœ°æ–¹ï¼Œä½†æ˜¯æˆ‘ä»¬çš„ä¸šåŠ¡éœ€æ±‚å®åœ¨æ˜¯å¤šå˜ï¼Œå¯¹äºéƒ¨åˆ†ç»„ä»¶çš„ä¸ç¡®å®šæ€§éœ€è¦å¥½å¥½çš„è°ƒç ”æ€»ç»“ï¼Œå¸Œæœ›å°ç¨‹åºç»„ä»¶è¶Šæ¥è¶Šå®Œå–„å§~ ğŸ¤£</p>`,26),e=[o];function t(c,r,F,y,D,i){return n(),a("div",null,e)}const d=s(p,[["render",t]]);export{C as __pageData,d as default};
