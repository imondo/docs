(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{366:function(t,e,l){"use strict";l.r(e);var v=l(18),_=Object(v.a)({},(function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[l("h1",{attrs:{id:"webpack-实现-ssr-打包"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#webpack-实现-ssr-打包"}},[t._v("#")]),t._v(" webpack 实现 SSR 打包")]),t._v(" "),l("h2",{attrs:{id:"服务端渲染（ssr）是什么"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#服务端渲染（ssr）是什么"}},[t._v("#")]),t._v(" 服务端渲染（SSR）是什么")]),t._v(" "),l("ul",[l("li",[t._v("渲染：HTML + CSS + JS + DATA => 渲染后的 HTML")])]),t._v(" "),l("p",[t._v("服务端")]),t._v(" "),l("ul",[l("li",[t._v("所有模板等资源都存储在服务端")]),t._v(" "),l("li",[t._v("内网机器拉取数据更快（优势）")]),t._v(" "),l("li",[t._v("一个 HTML 返回所有数据")])]),t._v(" "),l("table",[l("thead",[l("tr",[l("th",{staticStyle:{"text-align":"left"}}),t._v(" "),l("th",{staticStyle:{"text-align":"center"}},[t._v("客户端渲染")]),t._v(" "),l("th",{staticStyle:{"text-align":"center"}},[t._v("服务端渲染")])])]),t._v(" "),l("tbody",[l("tr",[l("td",{staticStyle:{"text-align":"left"}},[t._v("请求")]),t._v(" "),l("td",{staticStyle:{"text-align":"center"}},[t._v("多个请求（HTML，数据等）")]),t._v(" "),l("td",{staticStyle:{"text-align":"center"}},[t._v("1个请求")])]),t._v(" "),l("tr",[l("td",{staticStyle:{"text-align":"left"}},[t._v("加载过程")]),t._v(" "),l("td",{staticStyle:{"text-align":"center"}},[t._v("HTML & 数据串行加载")]),t._v(" "),l("td",{staticStyle:{"text-align":"center"}},[t._v("1个请求返回 HTML & 数据")])]),t._v(" "),l("tr",[l("td",{staticStyle:{"text-align":"left"}},[t._v("渲染")]),t._v(" "),l("td",{staticStyle:{"text-align":"center"}},[t._v("前端渲染")]),t._v(" "),l("td",{staticStyle:{"text-align":"center"}},[t._v("服务端渲染")])]),t._v(" "),l("tr",[l("td",{staticStyle:{"text-align":"left"}},[t._v("可交互")]),t._v(" "),l("td",{staticStyle:{"text-align":"center"}},[t._v("图片等静态资源加载完成，JS 逻辑执行完成可交互")]),t._v(" "),l("td",{staticStyle:{"text-align":"center"}},[t._v("两端一样")])])])]),t._v(" "),l("p",[t._v("优势")]),t._v(" "),l("ul",[l("li",[t._v("减少白屏时间")]),t._v(" "),l("li",[t._v("对于 SEO 友好")])]),t._v(" "),l("h2",{attrs:{id:"打包存在的问题"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#打包存在的问题"}},[t._v("#")]),t._v(" 打包存在的问题")]),t._v(" "),l("ul",[l("li",[t._v("浏览器的全局变量（Node.js 中没有 window，document）\n"),l("ul",[l("li",[t._v("组件适配：将不兼容的组件根据打包环境进行适配")]),t._v(" "),l("li",[t._v("请求适配：推荐使用 "),l("code",[t._v("axios")])])])]),t._v(" "),l("li",[t._v("样式问题（Node.js 无法解析 css）\n"),l("ul",[l("li",[t._v("服务端打包通过 "),l("code",[t._v("ignore-loader")]),t._v(" 忽略掉 "),l("code",[t._v("css")]),t._v(" 的解析")]),t._v(" "),l("li",[t._v("将 "),l("code",[t._v("style-loader")]),t._v(" 替换成 "),l("code",[t._v("isomorphic-style-loader")])]),t._v(" "),l("li",[t._v("使用打包出来的浏览器端 html 为模板")]),t._v(" "),l("li",[t._v("设置占位符，动态插入组件")])])])])])}),[],!1,null,null,null);e.default=_.exports}}]);