(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{231:function(t,e,n){"use strict";n.r(e);var o=n(0),r=Object(o.a)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"typescript与react结合一些注意点（持续更新）"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#typescript与react结合一些注意点（持续更新）"}},[t._v("#")]),t._v(" TypeScript与react结合一些注意点（持续更新）")]),t._v(" "),n("h2",{attrs:{id:"dom元素的选择"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#dom元素的选择"}},[t._v("#")]),t._v(" DOM元素的选择")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("const body: HTMLElement = document.body;\nif (document.documentElement) {\n  const scrollTop = document.documentElement.scrollTop || body.scrollTop; \n}\n")])])]),n("h2",{attrs:{id:"scroll滚动事件的绑定"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#scroll滚动事件的绑定"}},[t._v("#")]),t._v(" scroll滚动事件的绑定")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("constructor(props: any) {\n  super(props);\n  this.handleScroll = this.handleScroll.bind(this);\n}\npublic componentDidMount() {\n  window.addEventListener('scroll', this.handleScroll);\n}\npublic componentWillUnmount() {\n  window.removeEventListener('scroll', this.handleScroll);\n}\n")])])]),n("h2",{attrs:{id:"withrouter"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#withrouter"}},[t._v("#")]),t._v(" withRouter")]),t._v(" "),n("p",[t._v("当你想要访问"),n("code",[t._v("match")]),t._v("、"),n("code",[t._v("location")]),t._v("、"),n("code",[t._v("history")]),t._v("这三个对象的时候可以使用"),n("code",[t._v("withRouter")]),t._v("来包裹组件来实现高阶组件（HOC）")]),t._v(" "),n("p",[t._v("结合"),n("code",[t._v("TypeScript")]),t._v("想访问"),n("code",[t._v("match")]),t._v("、"),n("code",[t._v("location")]),t._v("、"),n("code",[t._v("history")]),t._v("时，需要引入"),n("code",[t._v("RouteComponentProps")]),t._v("。")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://github.com/caistrong/Blog/issues/74",target:"_blank",rel:"noopener noreferrer"}},[t._v("以withRouter出发看React高阶组件"),n("OutboundLink")],1)]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("import { RouteComponentProps, withRouter } from 'react-router-dom';\n\ninterface IArticleProps extends RouteComponentProps<any> {\n  ...\n}\n\nclass ArticleItem extends React.Component<IArticleProps> {\n  public componentWillMount() {\n    const id = this.props.match.params.id;\n    ...\n  }\n\n  public render() {\n    ...\n  }\n}\n\nexport default withRouter<IArticleProps>(ArticleItem);\n")])])]),n("h2",{attrs:{id:"路由"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#路由"}},[t._v("#")]),t._v(" 路由")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("利用"),n("code",[t._v("props")]),t._v("中"),n("code",[t._v("children")]),t._v("属性来实现路由"),n("code",[t._v("link")]),t._v("跳转")])]),t._v(" "),n("li",[n("p",[t._v("利用"),n("code",[t._v("Loadable")]),t._v("来实现按需加载路由")])])]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("// router.tsx\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport * as Loadable from 'react-loadable';\n\nconst LoadComponent = (view: string): any => {\n  return () => import(`./pages/${view}`);\n};\n\nconst RouterList: IRouteMap[] = [\n  {\n    path: '/',\n    component: LoadComponent('Home')\n  },\n  ...\n]  \n\nconst RouterMap = () => (\n  <Router basename=\"/rtblog\">\n    <Layout>\n      <Switch>\n        {RouterList.map((item, i) => (\n          <Route\n            key={i}\n            exact={true}\n            path={item.path}\n            component={Loadable({\n              loader: item.component,\n              loading: Loading\n            })}\n          />\n        ))}\n      </Switch>\n    </Layout>\n  </Router>\n)\n\nexport default RouterMap;\n\n")])])]),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('// layout.tsx\n\n...\npublic render() {\n  const { children } = this.props;\n  return (\n    <div className="layout-wrapper">\n      <Header />\n      <MainContent children={children} />\n      <BackTop>\n        <div className="back-top-inner">UP</div>\n      </BackTop>\n    </div>\n  );\n}\n')])])])])}),[],!1,null,null,null);e.default=r.exports}}]);