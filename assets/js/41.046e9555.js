(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{257:function(s,t,a){"use strict";a.r(t);var e=a(0),r=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"docker安装jenkins入门"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker安装jenkins入门"}},[s._v("#")]),s._v(" Docker安装Jenkins入门")]),s._v(" "),a("h2",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),a("p",[s._v("执行以下命令")]),s._v(" "),a("div",{staticClass:"language-mginx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 相关依赖\n$ sudo yum install -y yum-utils \\\n  device-mapper-persistent-data \\\n  lvm2\n  \n# 设置稳定仓库\n  \n$ sudo yum-config-manager \\\n    --add-repo \\\n    https://download.docker.com/linux/centos/docker-ce.repo\n    \n# 安装docker\n\nsudo yum install docker-ce docker-ce-cli containerd.io\n\n# 版本\n\ndocker -v\n\n")])])]),a("h2",{attrs:{id:"安装jenkins"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装jenkins"}},[s._v("#")]),s._v(" 安装Jenkins")]),s._v(" "),a("p",[a("code",[s._v("jenkins")]),s._v("的容器启动后，重要的文件保存在当前电脑，否则容器被损坏或者删除后就找不回这些文件了，准备一个目录作为文件映射，注意文件夹权限问题，本机目录是"),a("code",[s._v("/usr/local/work/jenkins")]),s._v("，并且执行了"),a("code",[s._v("chmod 777 /usr/local/work/jenkins")]),s._v("以确保"),a("code",[s._v("docker")]),s._v("进程有权限读写此目录")]),s._v(" "),a("div",{staticClass:"language-nginx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-nginx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看是否占用端口8080")]),s._v("\n\nnetstat "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("anp "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" grep "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装jenkins")]),s._v("\n\ndocker run "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("50000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("50000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("v "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("work"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("jenkins"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("var"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("jenkins_home "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("name my"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("jenkins "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("idt jenkins\n")])])]),a("blockquote",[a("p",[s._v("出现"),a("code",[s._v("Cannot connect to the Docker daemon.")]),s._v("问题尝试"),a("code",[s._v("service docker start")]),s._v("重启")])]),s._v(" "),a("p",[s._v("访问"),a("code",[s._v("8080")]),s._v("端口")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://imgchr.com/i/lXEqg0",target:"_blank",rel:"noopener noreferrer"}},[s._v("!如图"),a("OutboundLink")],1)]),s._v(" "),a("ul",[a("li",[a("p",[s._v("页面提示密码文件的位置："),a("code",[s._v("/var/jenkins_home/secrets/initialAdminPassword")]),s._v("，由于已经将"),a("code",[s._v("/var/jenkins_home")]),s._v("目录映射到"),a("code",[s._v("/usr/local/work/jenkins")]),s._v("目录，所以密码文件位置是："),a("code",[s._v("/usr/local/work/jenkins/secrets/initialAdminPassword")])])]),s._v(" "),a("li",[a("p",[s._v("安装推荐的插件")])])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.ax1x.com/2020/01/15/lXVeVe.png",alt:"配置"}})]),s._v(" "),a("h2",{attrs:{id:"docker指令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker指令"}},[s._v("#")]),s._v(" docker指令")]),s._v(" "),a("div",{staticClass:"language-nginx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-nginx"}},[a("code",[s._v("service docker start "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" 启动docker\n\ndocker run "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" 启动容器\n\ndocker stop "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("image id"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" 停止容器运行\n\ndocker rmi "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("image id"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" 通过镜像的id来删除指定镜像\n\ndocker pull jenkins"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("jenkins "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" 更新容器\n\ndocker ps "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("a "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" 查看容器状态\n\ndocker inspect CONTAINER ID "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" 查看容器详情\n\n")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);