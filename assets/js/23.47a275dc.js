(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{385:function(s,n,a){"use strict";a.r(n);var t=a(23),e=Object(t.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"typescript与react结合一些注意点-持续更新"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#typescript与react结合一些注意点-持续更新"}},[s._v("#")]),s._v(" TypeScript与react结合一些注意点（持续更新）")]),s._v(" "),a("h2",{attrs:{id:"dom元素的选择"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dom元素的选择"}},[s._v("#")]),s._v(" DOM元素的选择")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const body: HTMLElement = document.body;\nif (document.documentElement) {\n  const scrollTop = document.documentElement.scrollTop || body.scrollTop; \n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h2",{attrs:{id:"scroll滚动事件的绑定"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#scroll滚动事件的绑定"}},[s._v("#")]),s._v(" scroll滚动事件的绑定")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("constructor(props: any) {\n  super(props);\n  this.handleScroll = this.handleScroll.bind(this);\n}\npublic componentDidMount() {\n  window.addEventListener('scroll', this.handleScroll);\n}\npublic componentWillUnmount() {\n  window.removeEventListener('scroll', this.handleScroll);\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h2",{attrs:{id:"withrouter"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#withrouter"}},[s._v("#")]),s._v(" withRouter")]),s._v(" "),a("p",[s._v("当你想要访问"),a("code",[s._v("match")]),s._v("、"),a("code",[s._v("location")]),s._v("、"),a("code",[s._v("history")]),s._v("这三个对象的时候可以使用"),a("code",[s._v("withRouter")]),s._v("来包裹组件来实现高阶组件（HOC）")]),s._v(" "),a("p",[s._v("结合"),a("code",[s._v("TypeScript")]),s._v("想访问"),a("code",[s._v("match")]),s._v("、"),a("code",[s._v("location")]),s._v("、"),a("code",[s._v("history")]),s._v("时，需要引入"),a("code",[s._v("RouteComponentProps")]),s._v("。")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/caistrong/Blog/issues/74",target:"_blank",rel:"noopener noreferrer"}},[s._v("以withRouter出发看React高阶组件"),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("import { RouteComponentProps, withRouter } from 'react-router-dom';\n\ninterface IArticleProps extends RouteComponentProps<any> {\n  ...\n}\n\nclass ArticleItem extends React.Component<IArticleProps> {\n  public componentWillMount() {\n    const id = this.props.match.params.id;\n    ...\n  }\n\n  public render() {\n    ...\n  }\n}\n\nexport default withRouter<IArticleProps>(ArticleItem);\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])]),a("h2",{attrs:{id:"路由"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#路由"}},[s._v("#")]),s._v(" 路由")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("利用"),a("code",[s._v("props")]),s._v("中"),a("code",[s._v("children")]),s._v("属性来实现路由"),a("code",[s._v("link")]),s._v("跳转")])]),s._v(" "),a("li",[a("p",[s._v("利用"),a("code",[s._v("Loadable")]),s._v("来实现按需加载路由")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("// router.tsx\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport * as Loadable from 'react-loadable';\n\nconst LoadComponent = (view: string): any => {\n  return () => import(`./pages/${view}`);\n};\n\nconst RouterList: IRouteMap[] = [\n  {\n    path: '/',\n    component: LoadComponent('Home')\n  },\n  ...\n]  \n\nconst RouterMap = () => (\n  <Router basename=\"/rtblog\">\n    <Layout>\n      <Switch>\n        {RouterList.map((item, i) => (\n          <Route\n            key={i}\n            exact={true}\n            path={item.path}\n            component={Loadable({\n              loader: item.component,\n              loading: Loading\n            })}\n          />\n        ))}\n      </Switch>\n    </Layout>\n  </Router>\n)\n\nexport default RouterMap;\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('// layout.tsx\n\n...\npublic render() {\n  const { children } = this.props;\n  return (\n    <div className="layout-wrapper">\n      <Header />\n      <MainContent children={children} />\n      <BackTop>\n        <div className="back-top-inner">UP</div>\n      </BackTop>\n    </div>\n  );\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])])])}),[],!1,null,null,null);n.default=e.exports}}]);