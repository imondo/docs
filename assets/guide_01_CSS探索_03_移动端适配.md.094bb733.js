import{_ as s,c as a,o as n,a as l}from"./app.a57aac40.js";const C=JSON.parse('{"title":"移动端适配","description":"","frontmatter":{},"headers":[],"relativePath":"guide/01_CSS探索/03_移动端适配.md","lastUpdated":1675070703000}'),p={name:"guide/01_CSS探索/03_移动端适配.md"},e=l(`<h1 id="移动端适配" tabindex="-1">移动端适配 <a class="header-anchor" href="#移动端适配" aria-hidden="true">#</a></h1><p><a name="SdOOY"></a></p><h2 id="为什么需要适配" tabindex="-1">为什么需要适配 <a class="header-anchor" href="#为什么需要适配" aria-hidden="true">#</a></h2><p><br><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4f7469acf4f74d4888495e7139754362~tplv-k3u1fbpfcp-zoom-1.image" alt="屏幕.png"><br></p><ul><li>设计稿 375</li><li>不同手机不同物理分辨率</li><li>不能自适应</li></ul><p><a name="jDerV"></a></p><h2 id="尺寸" tabindex="-1">尺寸 <a class="header-anchor" href="#尺寸" aria-hidden="true">#</a></h2><p><br>屏幕尺寸是以屏幕的<strong>对角线</strong>来计量，单位是英寸<br><br><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cd113d12ab2b463d9718893652661d0d~tplv-k3u1fbpfcp-zoom-1.image" alt="尺寸.png"><br></p><table><thead><tr><th style="text-align:center;">名称</th><th style="text-align:center;">定义</th><th style="text-align:center;">单位</th></tr></thead><tbody><tr><td style="text-align:center;">像素</td><td style="text-align:center;">为组成一幅图像的全部亮度和色度的最小图像单元</td><td style="text-align:center;">Pel，pixel;pictureelement</td></tr><tr><td style="text-align:center;">分辨率</td><td style="text-align:center;">指纵横向上的像素点数</td><td style="text-align:center;">px</td></tr><tr><td style="text-align:center;">设备像素</td><td style="text-align:center;">物理分辨率越大，图像缩小</td><td style="text-align:center;">p</td></tr><tr><td style="text-align:center;">设备独立像素</td><td style="text-align:center;">视网膜屏幕，2x2个像素当1个像素</td><td style="text-align:center;">Retina Display</td></tr><tr><td style="text-align:center;">设备像素比</td><td style="text-align:center;">物理像素和设备独立像素的比值</td><td style="text-align:center;">dpr（device pixel ratio）</td></tr></tbody></table><p><a name="TqF30"></a></p><h2 id="" tabindex="-1"><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/075640707cbe4248ba1bc8f008f6c981~tplv-k3u1fbpfcp-zoom-1.image" alt="屏幕.png"><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/97be3f705fdd4c85b7317eb5cd6412c1~tplv-k3u1fbpfcp-zoom-1.image" alt="屏幕.png"> <a class="header-anchor" href="#" aria-hidden="true">#</a></h2><p><a name="8QL54"></a></p><h3 id="_1px-边框问题" tabindex="-1">1px 边框问题 <a class="header-anchor" href="#_1px-边框问题" aria-hidden="true">#</a></h3><blockquote></blockquote><ul><li>每个设备的屏幕设备尺寸不一样，就导致每个物理像素渲染出来的大小也不同（设备的像素大小是不固定的）</li><li>当我们写 css 中的 1px 时候，由于它是逻辑像素，导致我们的逻辑像素根据这个设备像素比（dpr）去映射到设备上就为 2px，或者 3px。 <a name="h0tcG"></a></li></ul><h3 id="transform-scale-5-方案" tabindex="-1">transform: scale(.5) 方案 <a class="header-anchor" href="#transform-scale-5-方案" aria-hidden="true">#</a></h3><div class="language-css"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">div</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#B2CCD6;">height</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">1px</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#B2CCD6;">background</span><span style="color:#89DDFF;">:#</span><span style="color:#A6ACCD;">000</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">-webkit-transform</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">scaleY</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">0.5</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">-webkit-transform-origin</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#B2CCD6;">overflow</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> hidden</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p><br>css 根据设备像素比媒体查询后的解决方案<br></p><div class="language-css"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">/* 2倍屏 */</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">@media</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">only</span><span style="color:#A6ACCD;"> screen </span><span style="color:#89DDFF;">and</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">-webkit-min-device-pixel-ratio</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2.0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">border-bottom</span><span style="color:#89DDFF;">::</span><span style="color:#C792EA;">after</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">-webkit-transform</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">scaleY</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">0.5</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#B2CCD6;">transform</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">scaleY</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">0.5</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/* 3倍屏 */</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">@media</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">only</span><span style="color:#A6ACCD;"> screen </span><span style="color:#89DDFF;">and</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">-webkit-min-device-pixel-ratio</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3.0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">border-bottom</span><span style="color:#89DDFF;">::</span><span style="color:#C792EA;">after</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">-webkit-transform</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">scaleY</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">0.33</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#B2CCD6;">transform</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">scaleY</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">0.33</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p><a name="mCCXB"></a></p><h2 id="如何适配" tabindex="-1">如何适配 <a class="header-anchor" href="#如何适配" aria-hidden="true">#</a></h2><p><a name="ATft9"></a></p><h3 id="viewport" tabindex="-1">viewport <a class="header-anchor" href="#viewport" aria-hidden="true">#</a></h3><ul><li>视口（viewport）代表当前可见计算机图形区域</li><li>你正在浏览文档的那一部分</li></ul><p><br>配置视口<br></p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">meta</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">viewport</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">content</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">width=device-width; initial-scale=1; maximum-scale=1; minimum-scale=1; user-scalable=no;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p><br>含义<br></p><table><thead><tr><th>属性</th><th>含义</th><th>取值</th></tr></thead><tbody><tr><td>width</td><td>定义视口的宽度，单位为像素</td><td>正整数或device-width</td></tr><tr><td>heigit</td><td>定义视口的高度，单位为像素</td><td>正整数或device-height</td></tr><tr><td>initial-scale</td><td>定义初始缩放值</td><td>整数或小数</td></tr><tr><td>minimum-scale</td><td>缩小最小比例，必须小于或等于maximum-scale</td><td>整数或小数</td></tr><tr><td>maximum-scale</td><td>放大最大比例，必须大于或等于minimum-scale</td><td>整数或小数</td></tr><tr><td>user-scalable</td><td>是否允许用户手动缩放页面</td><td>yes/no 默认值 yes</td></tr></tbody></table><p>规定了我们的视口宽度为屏幕宽带，初始缩放比例为 1，就是初始时候视觉视口就是理想视口</p><p><strong>user-scalable 设置为 no 可以解决移动端点击事件延迟问题</strong></p><h3 id="rem-适配" tabindex="-1">rem 适配 <a class="header-anchor" href="#rem-适配" aria-hidden="true">#</a></h3><ul><li>rem 是 css3 新增的一个相对单位</li><li>相对 <strong>HTML</strong> 根元素设定字体大小</li><li>em 相对 **父级元素 **设定字体大小</li></ul><div class="language-css"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">html</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#B2CCD6;">font-size</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">20px</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/* 相对根元素20px像素 */</span></span>
<span class="line"><span style="color:#FFCB6B;">span</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#B2CCD6;">font-size</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1rem</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p><a name="Cfsxd"></a></p><h3 id="淘宝-flexible" tabindex="-1">淘宝 flexible <a class="header-anchor" href="#淘宝-flexible" aria-hidden="true">#</a></h3><p><br>淘宝使用的过渡方案，在页面初始时给根元素动态设置一个 font-size，接下来元素根据 rem 来布局<br></p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// set 1rem = viewWidth / 10</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">setRemUnit</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">rem</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">docEl</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">clientWidth</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">/</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">10</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">docEl</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">style</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fontSize</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">rem</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">px</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#82AAFF;">setRemUnit</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p><br>**注意：**用户使用更大的屏幕，是想看到更多的内容，而不是更大的字<br></p><p><a name="IKfQs"></a></p><h3 id="vw-vh-布局" tabindex="-1">vw，vh 布局 <a class="header-anchor" href="#vw-vh-布局" aria-hidden="true">#</a></h3><p><br>vh vw方案：将视觉视口宽度 window.innerWidth 和视觉视口高度 window.innerHeight 等分 100 份<br><br>px转换成 vw 不一定能完全整除，因此有一定像素差<br><br><a href="https://github.com/evrone/postcss-px-to-viewport/blob/master/README_CN.md" target="_blank" rel="noreferrer">postcss-px-to-viewport</a> <a href="https://juejin.im/post/5cf0d8fb6fb9a07ee9585681#heading-0" target="_blank" rel="noreferrer">方案</a>转换<br></p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#FFCB6B;">loader</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">postcss-loader</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#FFCB6B;">options</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    	</span><span style="color:#FFCB6B;">plugins</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;">[</span></span>
<span class="line"><span style="color:#F07178;">        	</span><span style="color:#82AAFF;">require</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">autoprefixer</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        		browsers</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">last 5 versions</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">]</span></span>
<span class="line"><span style="color:#F07178;">        	</span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">        	</span><span style="color:#82AAFF;">require</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">postcss-px-to-viewport</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        		viewportWidth</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">375</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 视口宽度（数字)</span></span>
<span class="line"><span style="color:#F07178;">        		viewportHeight</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1334</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 视口高度（数字）</span></span>
<span class="line"><span style="color:#F07178;">        		unitPrecision</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">3</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 设置的保留小数位数（数字）</span></span>
<span class="line"><span style="color:#F07178;">        		viewportUnit</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vw</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 设置要转换的单位（字符串）</span></span>
<span class="line"><span style="color:#F07178;">        		selectorBlackList</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">.ignore</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">.hairlines</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 不需要进行转换的类名（数组）</span></span>
<span class="line"><span style="color:#F07178;">                minPixelValue</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 设置要替换的最小像素值（数字）</span></span>
<span class="line"><span style="color:#F07178;">                mediaQuery</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 允许在媒体查询中转换px（true/false）</span></span>
<span class="line"><span style="color:#F07178;">        	</span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    	]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p><a name="Pqjnr"></a></p><h2 id="适配流程" tabindex="-1">适配流程 <a class="header-anchor" href="#适配流程" aria-hidden="true">#</a></h2><p><br><strong>px 为主，vh，vw 为辅，搭配一些 flex</strong><br></p><ul><li>在 head 设置 width=device-width 的 viewport</li><li>在 css 中使用 px</li><li>在适当场景中使用 flex 布局，或者配合 vw 进行自适应</li><li>在跨设备类型的时候（px &lt; = &gt; 手机 &lt;=&gt;平板） 使用媒体查询</li><li>在跨设备类型如果交互差异太大的情况，考虑分开项目开发</li></ul><p><br><strong>参考：</strong><br><a href="https://juejin.im/post/5e6caf55e51d4526ff026a71" target="_blank" rel="noreferrer">面试官：你了解过移动端适配吗？</a><br><a href="https://juejin.im/post/5c0dd7ac6fb9a049c43d7edc#heading-13" target="_blank" rel="noreferrer">移动端适配总结</a></p>`,47),t=[e];function o(r,c,i,F,y,D){return n(),a("div",null,t)}const h=s(p,[["render",o]]);export{C as __pageData,h as default};
