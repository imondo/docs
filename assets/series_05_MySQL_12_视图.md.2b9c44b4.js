import{_ as s,c as n,o as a,a as l}from"./app.eb88d1d6.js";const i=JSON.parse('{"title":"视图","description":"","frontmatter":{},"headers":[],"relativePath":"series/05_MySQL/12_视图.md","lastUpdated":1671517348000}'),p={name:"series/05_MySQL/12_视图.md"},o=l(`<h1 id="视图" tabindex="-1">视图 <a class="header-anchor" href="#视图" aria-hidden="true">#</a></h1><h2 id="创建视图" tabindex="-1">创建视图 <a class="header-anchor" href="#创建视图" aria-hidden="true">#</a></h2><p>连接查询，关键词 <code>inner join</code></p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> s1.number, s1.name, s1.major, s2.subject, s2.score </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> student_info </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> s1 </span><span style="color:#F78C6C;">inner join</span><span style="color:#A6ACCD;"> student_score </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> s2 </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> s1.number</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">s2.number </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> s1.sex</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">女</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">----------+-----------+--------------------------+-----------------------------+-------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| </span><span style="color:#C792EA;">number</span><span style="color:#A6ACCD;">   | </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;">      | major                    | </span><span style="color:#F78C6C;">subject</span><span style="color:#A6ACCD;">                     | score |</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">----------+-----------+--------------------------+-----------------------------+-------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| </span><span style="color:#F78C6C;">20180102</span><span style="color:#A6ACCD;"> | 杜琦燕    | 计算机科学与工程         | 母猪的产后护理              |   </span><span style="color:#F78C6C;">100</span><span style="color:#A6ACCD;"> |</span></span>
<span class="line"><span style="color:#A6ACCD;">| </span><span style="color:#F78C6C;">20180102</span><span style="color:#A6ACCD;"> | 杜琦燕    | 计算机科学与工程         | 论萨达姆的战争准备          |    </span><span style="color:#F78C6C;">98</span><span style="color:#A6ACCD;"> |</span></span>
<span class="line"><span style="color:#A6ACCD;">| </span><span style="color:#F78C6C;">20180104</span><span style="color:#A6ACCD;"> | 史珍香    | 软件工程                 | 母猪的产后护理              |    </span><span style="color:#F78C6C;">55</span><span style="color:#A6ACCD;"> |</span></span>
<span class="line"><span style="color:#A6ACCD;">| </span><span style="color:#F78C6C;">20180104</span><span style="color:#A6ACCD;"> | 史珍香    | 软件工程                 | 论萨达姆的战争准备          |    </span><span style="color:#F78C6C;">46</span><span style="color:#A6ACCD;"> |</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">----------+-----------+--------------------------+-----------------------------+-------+</span></span>
<span class="line"><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">rows</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">11</span><span style="color:#A6ACCD;"> sec)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>视图是查询语句的别名</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> VIEW 视图名 </span><span style="color:#F78C6C;">AS</span><span style="color:#A6ACCD;"> 查询语句</span></span>
<span class="line"></span></code></pre></div><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> view student_view_score </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> s1.number, s1.name, s1.major, s2.subject, s2.score </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> student_info </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> s1 </span><span style="color:#F78C6C;">inner join</span><span style="color:#A6ACCD;"> student_score </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> s2 </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> s1.number</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">s2.number </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> s1.sex</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">女</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">Query OK, </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">rows</span><span style="color:#A6ACCD;"> affected (</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;"> sec)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><h2 id="使用视图" tabindex="-1">使用视图 <a class="header-anchor" href="#使用视图" aria-hidden="true">#</a></h2><p>视图也可称为虚拟表，虚拟表中查询的列对应虚拟列</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> student_view_score;</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">----------+-----------+--------------------------+-----------------------------+-------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| </span><span style="color:#C792EA;">number</span><span style="color:#A6ACCD;">   | </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;">      | major                    | </span><span style="color:#F78C6C;">subject</span><span style="color:#A6ACCD;">                     | score |</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">----------+-----------+--------------------------+-----------------------------+-------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| </span><span style="color:#F78C6C;">20180102</span><span style="color:#A6ACCD;"> | 杜琦燕    | 计算机科学与工程         | 母猪的产后护理              |   </span><span style="color:#F78C6C;">100</span><span style="color:#A6ACCD;"> |</span></span>
<span class="line"><span style="color:#A6ACCD;">| </span><span style="color:#F78C6C;">20180102</span><span style="color:#A6ACCD;"> | 杜琦燕    | 计算机科学与工程         | 论萨达姆的战争准备          |    </span><span style="color:#F78C6C;">98</span><span style="color:#A6ACCD;"> |</span></span>
<span class="line"><span style="color:#A6ACCD;">| </span><span style="color:#F78C6C;">20180104</span><span style="color:#A6ACCD;"> | 史珍香    | 软件工程                 | 母猪的产后护理              |    </span><span style="color:#F78C6C;">55</span><span style="color:#A6ACCD;"> |</span></span>
<span class="line"><span style="color:#A6ACCD;">| </span><span style="color:#F78C6C;">20180104</span><span style="color:#A6ACCD;"> | 史珍香    | 软件工程                 | 论萨达姆的战争准备          |    </span><span style="color:#F78C6C;">46</span><span style="color:#A6ACCD;"> |</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">----------+-----------+--------------------------+-----------------------------+-------+</span></span>
<span class="line"><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">rows</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">00</span><span style="color:#A6ACCD;"> sec)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">subject</span><span style="color:#A6ACCD;">, </span><span style="color:#82AAFF;">avg</span><span style="color:#A6ACCD;">(score) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> student_view_score </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> score</span><span style="color:#89DDFF;">&gt;</span><span style="color:#F78C6C;">60</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">group by</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">subject</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">having</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">avg</span><span style="color:#A6ACCD;">(score) </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">75</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">limit</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">-----------------------+------------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| </span><span style="color:#F78C6C;">subject</span><span style="color:#A6ACCD;">               | </span><span style="color:#82AAFF;">avg</span><span style="color:#A6ACCD;">(score) |</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">-----------------------+------------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| 母猪的产后护理        |   </span><span style="color:#F78C6C;">100</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">0000</span><span style="color:#A6ACCD;"> |</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">-----------------------+------------+</span></span>
<span class="line"><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">row</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">00</span><span style="color:#A6ACCD;"> sec)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>也可以和真实表一起用</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> student_view_score </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">number</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">number</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> student_info </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> major</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">计算机科学与工程</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">----------+-----------+--------------------------+-----------------------------+-------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| </span><span style="color:#C792EA;">number</span><span style="color:#A6ACCD;">   | </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;">      | major                    | </span><span style="color:#F78C6C;">subject</span><span style="color:#A6ACCD;">                     | score |</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">----------+-----------+--------------------------+-----------------------------+-------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| </span><span style="color:#F78C6C;">20180102</span><span style="color:#A6ACCD;"> | 杜琦燕    | 计算机科学与工程         | 母猪的产后护理              |   </span><span style="color:#F78C6C;">100</span><span style="color:#A6ACCD;"> |</span></span>
<span class="line"><span style="color:#A6ACCD;">| </span><span style="color:#F78C6C;">20180102</span><span style="color:#A6ACCD;"> | 杜琦燕    | 计算机科学与工程         | 论萨达姆的战争准备          |    </span><span style="color:#F78C6C;">98</span><span style="color:#A6ACCD;"> |</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">----------+-----------+--------------------------+-----------------------------+-------+</span></span>
<span class="line"><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">rows</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">00</span><span style="color:#A6ACCD;"> sec)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><h3 id="利用视图创建新视图" tabindex="-1">利用视图创建新视图 <a class="header-anchor" href="#利用视图创建新视图" aria-hidden="true">#</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> view by_view </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">number</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;"> ,score </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> student_view_score;</span></span>
<span class="line"><span style="color:#A6ACCD;">Query OK, </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">rows</span><span style="color:#A6ACCD;"> affected (</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;"> sec)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> by_view;</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">----------+-----------+-------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| </span><span style="color:#C792EA;">number</span><span style="color:#A6ACCD;">   | </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;">      | score |</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">----------+-----------+-------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| </span><span style="color:#F78C6C;">20180102</span><span style="color:#A6ACCD;"> | 杜琦燕    |   </span><span style="color:#F78C6C;">100</span><span style="color:#A6ACCD;"> |</span></span>
<span class="line"><span style="color:#A6ACCD;">| </span><span style="color:#F78C6C;">20180102</span><span style="color:#A6ACCD;"> | 杜琦燕    |    </span><span style="color:#F78C6C;">98</span><span style="color:#A6ACCD;"> |</span></span>
<span class="line"><span style="color:#A6ACCD;">| </span><span style="color:#F78C6C;">20180104</span><span style="color:#A6ACCD;"> | 史珍香    |    </span><span style="color:#F78C6C;">55</span><span style="color:#A6ACCD;"> |</span></span>
<span class="line"><span style="color:#A6ACCD;">| </span><span style="color:#F78C6C;">20180104</span><span style="color:#A6ACCD;"> | 史珍香    |    </span><span style="color:#F78C6C;">46</span><span style="color:#A6ACCD;"> |</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">----------+-----------+-------+</span></span>
<span class="line"><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">rows</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">00</span><span style="color:#A6ACCD;"> sec)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><h3 id="创建视图指定自定义列名" tabindex="-1">创建视图指定自定义列名 <a class="header-anchor" href="#创建视图指定自定义列名" aria-hidden="true">#</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> view student_info_view (</span><span style="color:#F78C6C;">no</span><span style="color:#A6ACCD;">, n, m) </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">number</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;">,major </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> student_info;</span></span>
<span class="line"><span style="color:#A6ACCD;">Query OK, </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">rows</span><span style="color:#A6ACCD;"> affected (</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">12</span><span style="color:#A6ACCD;"> sec)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">no</span><span style="color:#A6ACCD;">,n,m </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> student_info_view;</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">----------+-----------+--------------------------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| </span><span style="color:#F78C6C;">no</span><span style="color:#A6ACCD;">       | n         | m                        |</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">----------+-----------+--------------------------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| </span><span style="color:#F78C6C;">20180101</span><span style="color:#A6ACCD;"> | 杜子腾    | 计算机科学与工程         |</span></span>
<span class="line"><span style="color:#A6ACCD;">| </span><span style="color:#F78C6C;">20180102</span><span style="color:#A6ACCD;"> | 杜琦燕    | 计算机科学与工程         |</span></span>
<span class="line"><span style="color:#A6ACCD;">| </span><span style="color:#F78C6C;">20180103</span><span style="color:#A6ACCD;"> | 范统      | 软件工程                 |</span></span>
<span class="line"><span style="color:#A6ACCD;">| </span><span style="color:#F78C6C;">20180104</span><span style="color:#A6ACCD;"> | 史珍香    | 软件工程                 |</span></span>
<span class="line"><span style="color:#A6ACCD;">| </span><span style="color:#F78C6C;">20180105</span><span style="color:#A6ACCD;"> | 范剑      | 飞行器设计               |</span></span>
<span class="line"><span style="color:#A6ACCD;">| </span><span style="color:#F78C6C;">20180106</span><span style="color:#A6ACCD;"> | 朱逸群    | 电子信息                 |</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">----------+-----------+--------------------------+</span></span>
<span class="line"><span style="color:#F78C6C;">6</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">rows</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">00</span><span style="color:#A6ACCD;"> sec)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>如果仍旧使用与视图对应的查询语句的查询列表中的列名就会报错</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">number</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;">, major </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> student_info_view;</span></span>
<span class="line"><span style="color:#A6ACCD;">ERROR </span><span style="color:#F78C6C;">1054</span><span style="color:#A6ACCD;"> (42S22): Unknown column </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">number</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">field list</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><h2 id="查看视图" tabindex="-1">查看视图 <a class="header-anchor" href="#查看视图" aria-hidden="true">#</a></h2><h3 id="查看视图-1" tabindex="-1">查看视图 <a class="header-anchor" href="#查看视图-1" aria-hidden="true">#</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> show tables;</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">--------------------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| Tables_in_my_test  |</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">--------------------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| by_view            |</span></span>
<span class="line"><span style="color:#A6ACCD;">| first_table        |</span></span>
<span class="line"><span style="color:#A6ACCD;">| second_table       |</span></span>
<span class="line"><span style="color:#A6ACCD;">| student_info       |</span></span>
<span class="line"><span style="color:#A6ACCD;">| student_info_view  |</span></span>
<span class="line"><span style="color:#A6ACCD;">| student_score      |</span></span>
<span class="line"><span style="color:#A6ACCD;">| student_view_score |</span></span>
<span class="line"><span style="color:#A6ACCD;">| t1                 |</span></span>
<span class="line"><span style="color:#A6ACCD;">| t2                 |</span></span>
<span class="line"><span style="color:#A6ACCD;">| test_table         |</span></span>
<span class="line"><span style="color:#A6ACCD;">| uses               |</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">--------------------+</span></span>
<span class="line"><span style="color:#F78C6C;">11</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">rows</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">06</span><span style="color:#A6ACCD;"> sec)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>因为视图是一张<strong>虚拟表</strong>，所以新创建的视图的名称不能和当前数据库中的其他视图或者表的名称冲突！</p><h3 id="查看视图定义" tabindex="-1">查看视图定义 <a class="header-anchor" href="#查看视图定义" aria-hidden="true">#</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">SHOW </span><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> VIEW 视图名;</span></span>
<span class="line"></span></code></pre></div><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> show </span><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> view student_info_view\\G;</span></span>
<span class="line"><span style="color:#89DDFF;">***************************</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">. </span><span style="color:#F78C6C;">row</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">***************************</span></span>
<span class="line"><span style="color:#A6ACCD;">                View: student_info_view</span></span>
<span class="line"><span style="color:#A6ACCD;">         </span><span style="color:#F78C6C;">Create</span><span style="color:#A6ACCD;"> View: </span><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">ALGORITHM</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">UNDEFINED DEFINER</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">root</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">@</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">localhost</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">SQL</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">SECURITY</span><span style="color:#A6ACCD;"> DEFINER VIEW </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">student_info_view</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">no</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">n</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">m</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">AS</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">student_info</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">.</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">number</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">AS</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">number</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">student_info</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">.</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">AS</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">student_info</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">.</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">major</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">AS</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">major</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">student_info</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#A6ACCD;">character_set_client: utf8</span></span>
<span class="line"><span style="color:#A6ACCD;">collation_connection: utf8_general_ci</span></span>
<span class="line"><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">row</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">00</span><span style="color:#A6ACCD;"> sec)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">ERROR:</span></span>
<span class="line"><span style="color:#F78C6C;">No</span><span style="color:#A6ACCD;"> query specified</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><h2 id="可更新视图" tabindex="-1">可更新视图 <a class="header-anchor" href="#可更新视图" aria-hidden="true">#</a></h2><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">update</span><span style="color:#A6ACCD;"> student_info_view </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> n</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">111</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">no</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">20180101</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">Query OK, </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">row</span><span style="color:#A6ACCD;"> affected (</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;"> sec)</span></span>
<span class="line"><span style="color:#F78C6C;">Rows</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">matched</span><span style="color:#A6ACCD;">: </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">  Changed: </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">  Warnings: </span><span style="color:#F78C6C;">0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> student_info_view;</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">----------+-----------+--------------------------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| </span><span style="color:#F78C6C;">no</span><span style="color:#A6ACCD;">       | n         | m                        |</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">----------+-----------+--------------------------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| </span><span style="color:#F78C6C;">20180101</span><span style="color:#A6ACCD;"> | </span><span style="color:#F78C6C;">111</span><span style="color:#A6ACCD;">       | 计算机科学与工程         |</span></span>
<span class="line"><span style="color:#A6ACCD;">| </span><span style="color:#F78C6C;">20180102</span><span style="color:#A6ACCD;"> | 杜琦燕    | 计算机科学与工程         |</span></span>
<span class="line"><span style="color:#A6ACCD;">| </span><span style="color:#F78C6C;">20180103</span><span style="color:#A6ACCD;"> | 范统      | 软件工程                 |</span></span>
<span class="line"><span style="color:#A6ACCD;">| </span><span style="color:#F78C6C;">20180104</span><span style="color:#A6ACCD;"> | 史珍香    | 软件工程                 |</span></span>
<span class="line"><span style="color:#A6ACCD;">| </span><span style="color:#F78C6C;">20180105</span><span style="color:#A6ACCD;"> | 范剑      | 飞行器设计               |</span></span>
<span class="line"><span style="color:#A6ACCD;">| </span><span style="color:#F78C6C;">20180106</span><span style="color:#A6ACCD;"> | 朱逸群    | 电子信息                 |</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">----------+-----------+--------------------------+</span></span>
<span class="line"><span style="color:#F78C6C;">6</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">rows</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">00</span><span style="color:#A6ACCD;"> sec)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>不过并不是可以在所有的视图上执行更新语句的，在生成视图的时候使用了下边这些语句的都不能进行更新：</p><ul><li>聚集函数（比如SUM(), MIN(), MAX(), COUNT()等等）</li><li>DISTINCT</li><li>GROUP BY</li><li>HAVING</li><li>UNION 或者 UNION ALL</li><li>某些子查询</li><li>某些连接查询</li><li>等等等等</li></ul><h2 id="删除视图" tabindex="-1">删除视图 <a class="header-anchor" href="#删除视图" aria-hidden="true">#</a></h2><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#F78C6C;">DROP</span><span style="color:#A6ACCD;"> VIEW 视图名</span></span>
<span class="line"></span></code></pre></div><p>删除 <code>by_view</code> 视图</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">drop</span><span style="color:#A6ACCD;"> view by_view;</span></span>
<span class="line"><span style="color:#A6ACCD;">Query OK, </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">rows</span><span style="color:#A6ACCD;"> affected (</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">13</span><span style="color:#A6ACCD;"> sec)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> show tables;</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">--------------------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| Tables_in_my_test  |</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">--------------------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| first_table        |</span></span>
<span class="line"><span style="color:#A6ACCD;">| second_table       |</span></span>
<span class="line"><span style="color:#A6ACCD;">| student_info       |</span></span>
<span class="line"><span style="color:#A6ACCD;">| student_info_view  |</span></span>
<span class="line"><span style="color:#A6ACCD;">| student_score      |</span></span>
<span class="line"><span style="color:#A6ACCD;">| student_view_score |</span></span>
<span class="line"><span style="color:#A6ACCD;">| t1                 |</span></span>
<span class="line"><span style="color:#A6ACCD;">| t2                 |</span></span>
<span class="line"><span style="color:#A6ACCD;">| test_table         |</span></span>
<span class="line"><span style="color:#A6ACCD;">| uses               |</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">--------------------+</span></span>
<span class="line"><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">rows</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">00</span><span style="color:#A6ACCD;"> sec)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div>`,35),e=[o];function C(c,t,r,y,A,D){return a(),n("div",null,e)}const d=s(p,[["render",C]]);export{i as __pageData,d as default};
