import{_ as s,c as n,o as a,a as l}from"./app.72bf9abe.js";const i=JSON.parse('{"title":"自定义变量和语句结束分隔符","description":"","frontmatter":{},"headers":[],"relativePath":"series/05_MySQL/13_自定义变量和语句结束分隔符.md","lastUpdated":1671535994000}'),p={name:"series/05_MySQL/13_自定义变量和语句结束分隔符.md"},o=l(`<h1 id="自定义变量和语句结束分隔符" tabindex="-1">自定义变量和语句结束分隔符 <a class="header-anchor" href="#自定义变量和语句结束分隔符" aria-hidden="true">#</a></h1><h2 id="存储程序" tabindex="-1">存储程序 <a class="header-anchor" href="#存储程序" aria-hidden="true">#</a></h2><p>可以封装一些语句</p><ul><li>存储例程 <ul><li>存储函数</li><li>存储过程</li></ul></li><li>触发器</li><li>事件</li></ul><h2 id="自定义变量" tabindex="-1">自定义变量 <a class="header-anchor" href="#自定义变量" aria-hidden="true">#</a></h2><p>变量的定义</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> @a</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">Query OK, </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">rows</span><span style="color:#A6ACCD;"> affected (</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">00</span><span style="color:#A6ACCD;"> sec)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>查询</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> @a;</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| @a   |</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">------+</span></span>
<span class="line"><span style="color:#A6ACCD;">|    </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> |</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">------+</span></span>
<span class="line"><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">row</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">00</span><span style="color:#A6ACCD;"> sec)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>变量赋值</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> @a</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">@b;</span></span>
<span class="line"><span style="color:#A6ACCD;">Query OK, </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">rows</span><span style="color:#A6ACCD;"> affected (</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">00</span><span style="color:#A6ACCD;"> sec)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> @b;</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">------------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| @b         |</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">------------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| </span><span style="color:#F78C6C;">NULL</span><span style="color:#A6ACCD;">       |</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">------------+</span></span>
<span class="line"><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">row</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">00</span><span style="color:#A6ACCD;"> sec)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>将某个查询的结果赋值给一个变量，前提是这个查询的结果只有一个值</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> @a</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> n1 </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> t1 </span><span style="color:#F78C6C;">limit</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">Query OK, </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">rows</span><span style="color:#A6ACCD;"> affected (</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">00</span><span style="color:#A6ACCD;"> sec)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> @a;</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| @a   |</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| a    |</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">------+</span></span>
<span class="line"><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">row</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">00</span><span style="color:#A6ACCD;"> sec)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>也可以使用另一种方式</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> n1 </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> t1 </span><span style="color:#F78C6C;">limit</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">into</span><span style="color:#A6ACCD;"> @b;</span></span>
<span class="line"><span style="color:#A6ACCD;">Query OK, </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">row</span><span style="color:#A6ACCD;"> affected (</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">00</span><span style="color:#A6ACCD;"> sec)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> @b;</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| @b   |</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| a    |</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">------+</span></span>
<span class="line"><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">row</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">00</span><span style="color:#A6ACCD;"> sec)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>一条查询记录有多个列</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> m1,n1 </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> t1 </span><span style="color:#F78C6C;">limit</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">into</span><span style="color:#A6ACCD;"> @b,@a;</span></span>
<span class="line"><span style="color:#A6ACCD;">Query OK, </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">row</span><span style="color:#A6ACCD;"> affected (</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">00</span><span style="color:#A6ACCD;"> sec)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> @b, @a;</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">------+------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| @b   | @a   |</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">------+------+</span></span>
<span class="line"><span style="color:#A6ACCD;">|    </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> | a    |</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">------+------+</span></span>
<span class="line"><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">row</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">00</span><span style="color:#A6ACCD;"> sec)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><h2 id="语句结束分隔符" tabindex="-1">语句结束分隔符 <a class="header-anchor" href="#语句结束分隔符" aria-hidden="true">#</a></h2><p>多条语句同时执行</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> t1 </span><span style="color:#F78C6C;">limit</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">;</span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> t2 </span><span style="color:#F78C6C;">limit</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">------+------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| m1   | n1   |</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">------+------+</span></span>
<span class="line"><span style="color:#A6ACCD;">|    </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> | a    |</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">------+------+</span></span>
<span class="line"><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">row</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">00</span><span style="color:#A6ACCD;"> sec)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">------+------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| m2   | n2   |</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">------+------+</span></span>
<span class="line"><span style="color:#A6ACCD;">|    </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> | b    |</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">------+------+</span></span>
<span class="line"><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">row</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">00</span><span style="color:#A6ACCD;"> sec)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>使用 <code>delimiter</code> 自定义语句分隔符</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> delimiter $</span></span>
<span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> t1 </span><span style="color:#F78C6C;">limit</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> t2 </span><span style="color:#F78C6C;">limit</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#A6ACCD;"> $</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">------+------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| m1   | n1   |</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">------+------+</span></span>
<span class="line"><span style="color:#A6ACCD;">|    </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> | a    |</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">------+------+</span></span>
<span class="line"><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">row</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">00</span><span style="color:#A6ACCD;"> sec)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">------+------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| m2   | n2   |</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">------+------+</span></span>
<span class="line"><span style="color:#A6ACCD;">|    </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> | b    |</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">------+------+</span></span>
<span class="line"><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">row</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">01</span><span style="color:#A6ACCD;"> sec)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>这个只是为了方便我们一次性输入多个语句，在输入完成之后最好还是改回我们常用的分号<code>;</code></p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> delimiter ;</span></span>
<span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div>`,24),e=[o];function C(c,t,r,y,A,D){return a(),n("div",null,e)}const d=s(p,[["render",C]]);export{i as __pageData,d as default};
