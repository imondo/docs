# 描边动画

由于 SVG 是一种 XML 格式的文档，和 HTML 中的 DOM 类似，所以 SVG 也能通过 CSS 执行动画效果。

这个动画是由一个颜色填充动画、描边线条动画和放大动画这三个动画组成。

## 描边动画原理

SVG 描边动画密切相关的3个属性

- `stroke`：用来定义边框的颜色

- `stroke-dasharray`：定义 `dash` 和 `gap` 的长度。它主要是通过使用逗号 `,` 来分隔实线和间隔的值。其实就是用来实现 `CSS` 中边框虚线的效果。和 `CSS` 中的 `dash` 的效果一样。例如：`stroke-dasharray="5, 5"` 表示，按照实线为 `5`，间隔为 `5` 的排布重复下去。

- `stroke-dashoffset`：用来设置 `dasharray` 定义 `dash` 线条开始的位置。值可以为 `number` || `percentage`。百分数是相对于 SVG 的 `viewport`。通常结合 `dasharray` 可以实现描边动画效果。


介绍完关于 `path` 的所有 `stroke` 属性之后，下面就来解释下 SVG 线条描边动画的原理。简单来说，就是通过 `stroke-dashoffset` 和 `stroke-dasharray` 来做。主要是以下两个步骤:

- 通过 `dasharray` 将实线部分增加至全长。比如：一条 `path` 的长度为 `100`，如果把 `SVG` 中的 `path` 的 `stroke-dasharray` 的值设置为 `100, 100`，即表示这条 `path` 将会按照实线 `100`，间隔 `100` 的排布重复下去。所以默认的情况下，我们只会看到一条 `100` 长度的实线，间隔 `100` 的线段由于已经在画布外，所以是不可见的。

- 通过 `stroke-dashoffset` 来移动新增的实线部分，造成线段移动的效果。比如由：`stroke-dashoffset: 500` 变为 `stroke-dashoffset: 0`

通过简单演示下：

```html
<svg x="0px" y="0px" width="300px" height="100px" viewBox="0 0 300 100" class="svg1">
  <line x1="20" y1="50" x2="200" y2="50" stroke="#000" stroke-width="1" ></line>
</svg>
```

样式为：

```css
.svg1 line {
  stroke-dasharray: 100, 100;
  stroke-dashoffset: 100;
}
```

因为 `stroke-dasharray` 和 `stroke-dashoffset` 的值都是 `100`，所以这条线段在网页初始化的时候，是看不见的。当我们把 `stroke-dashoffset` 的值设置为0的时候，它就可以显示出来，如下动图所示：

![svglin.gif](/imgs/svg/svglin.gif)

修改 CSS

```css
.svg1 line {
    stroke-dasharray: 100, 100;
    stroke-dashoffset: 100;
    transition: all 1s linear;
}
```
修改 `stroke-dashoffset` 值，动画效果就完成了。

## 示例

```html
<svg t="1669192258300" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6802" width="200" height="200"><path d="M512.6 925.3c-57.1 0-112.6-11.2-164.8-33.3-50.4-21.3-95.7-51.8-134.6-90.7-38.9-38.9-69.4-84.1-90.7-134.6-22-52.1-33.2-107.5-33.2-164.7 0-57.1 11.2-112.6 33.3-164.8 21.3-50.4 51.8-95.7 90.7-134.6 38.9-38.9 84.1-69.4 134.6-90.7 52.2-22.1 107.6-33.3 164.8-33.3 57.1 0 112.6 11.2 164.8 33.3 50.4 21.3 95.7 51.8 134.6 90.7 38.9 38.9 69.4 84.1 90.7 134.6 22 52.2 33.2 107.7 33.2 164.8 0 57.1-11.2 112.6-33.3 164.8-21.3 50.4-51.8 95.7-90.7 134.6-38.9 38.9-84.1 69.4-134.6 90.7-52.2 22-107.6 33.2-164.8 33.2z m0-810.5c-213.5 0-387.3 173.7-387.3 387.3 0 213.5 173.7 387.3 387.3 387.3 213.5 0 387.3-173.7 387.3-387.3 0-213.6-173.7-387.3-387.3-387.3z" fill="#353535" p-id="6803"></path><path d="M512.6 502m-256.1 0a256.1 256.1 0 1 0 512.2 0 256.1 256.1 0 1 0-512.2 0Z" fill="#FEE632" p-id="6804"></path><path d="M477.1 639.8c-9.9 9.9-25.9 9.9-35.8 0L333.9 532.4c-9.9-9.9-9.9-25.9 0-35.8 9.9-9.9 25.9-9.9 35.8 0L477.1 604c9.9 9.9 9.9 26 0 35.8z" fill="#353535" p-id="6805"></path><path d="M704.1 377c9.9 9.9 9.9 25.9 0 35.8L477.3 639.7c-9.9 9.9-25.9 9.9-35.8 0-9.9-9.9-9.9-25.9 0-35.8L668.3 377c9.9-9.8 25.9-9.8 35.8 0z" fill="#353535" p-id="6806"></path></svg>
```