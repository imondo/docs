<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>构建配置包设计 | Mondo</title>
    <meta name="description" content="记录工作与生活">
    <link rel="icon" href="/favicon.ico">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.5990769d.css" as="style"><link rel="preload" href="/assets/js/app.9950f38e.js" as="script"><link rel="preload" href="/assets/js/2.fbe0ca66.js" as="script"><link rel="preload" href="/assets/js/35.ccdf25ee.js" as="script"><link rel="prefetch" href="/assets/js/10.e2e05b89.js"><link rel="prefetch" href="/assets/js/11.7ca82758.js"><link rel="prefetch" href="/assets/js/12.373c275c.js"><link rel="prefetch" href="/assets/js/13.0e7ef301.js"><link rel="prefetch" href="/assets/js/14.f283c893.js"><link rel="prefetch" href="/assets/js/15.3f57122c.js"><link rel="prefetch" href="/assets/js/16.95e0c4d9.js"><link rel="prefetch" href="/assets/js/17.c3f776ff.js"><link rel="prefetch" href="/assets/js/18.0ccdd5eb.js"><link rel="prefetch" href="/assets/js/19.8a4a4f48.js"><link rel="prefetch" href="/assets/js/20.b01a8b82.js"><link rel="prefetch" href="/assets/js/21.31cfc583.js"><link rel="prefetch" href="/assets/js/22.7a0ebae0.js"><link rel="prefetch" href="/assets/js/23.f1158dca.js"><link rel="prefetch" href="/assets/js/24.853c7d8f.js"><link rel="prefetch" href="/assets/js/25.4c3c8e8a.js"><link rel="prefetch" href="/assets/js/26.3b8d97aa.js"><link rel="prefetch" href="/assets/js/27.699b807c.js"><link rel="prefetch" href="/assets/js/28.c01c6055.js"><link rel="prefetch" href="/assets/js/29.7e1dea2e.js"><link rel="prefetch" href="/assets/js/3.8ce1c2dd.js"><link rel="prefetch" href="/assets/js/30.e8b5ccf6.js"><link rel="prefetch" href="/assets/js/31.49d8714f.js"><link rel="prefetch" href="/assets/js/32.ac03496a.js"><link rel="prefetch" href="/assets/js/33.fecc04ab.js"><link rel="prefetch" href="/assets/js/34.bcb84524.js"><link rel="prefetch" href="/assets/js/36.053802f7.js"><link rel="prefetch" href="/assets/js/37.e03de305.js"><link rel="prefetch" href="/assets/js/38.9b9adc26.js"><link rel="prefetch" href="/assets/js/39.fd8d3db6.js"><link rel="prefetch" href="/assets/js/4.b14c80bd.js"><link rel="prefetch" href="/assets/js/40.06125e83.js"><link rel="prefetch" href="/assets/js/41.ce23f214.js"><link rel="prefetch" href="/assets/js/42.1377d637.js"><link rel="prefetch" href="/assets/js/43.0d37bb7a.js"><link rel="prefetch" href="/assets/js/44.2b8c5658.js"><link rel="prefetch" href="/assets/js/45.7470d28b.js"><link rel="prefetch" href="/assets/js/46.0dd240fc.js"><link rel="prefetch" href="/assets/js/47.59b0bc36.js"><link rel="prefetch" href="/assets/js/48.b428ac96.js"><link rel="prefetch" href="/assets/js/49.dbec48d6.js"><link rel="prefetch" href="/assets/js/5.7a46661d.js"><link rel="prefetch" href="/assets/js/50.54321762.js"><link rel="prefetch" href="/assets/js/51.52e96a07.js"><link rel="prefetch" href="/assets/js/52.59e98cb6.js"><link rel="prefetch" href="/assets/js/53.799ea3fa.js"><link rel="prefetch" href="/assets/js/54.183147ec.js"><link rel="prefetch" href="/assets/js/55.796dd5be.js"><link rel="prefetch" href="/assets/js/56.854f0b51.js"><link rel="prefetch" href="/assets/js/57.7782f274.js"><link rel="prefetch" href="/assets/js/58.05aa36c8.js"><link rel="prefetch" href="/assets/js/59.9fd711d2.js"><link rel="prefetch" href="/assets/js/6.589c3b69.js"><link rel="prefetch" href="/assets/js/60.c36214b4.js"><link rel="prefetch" href="/assets/js/61.fc054ed8.js"><link rel="prefetch" href="/assets/js/62.407e8af7.js"><link rel="prefetch" href="/assets/js/63.92d0c35d.js"><link rel="prefetch" href="/assets/js/64.759bc8af.js"><link rel="prefetch" href="/assets/js/65.3aa2c01a.js"><link rel="prefetch" href="/assets/js/7.e5c69548.js"><link rel="prefetch" href="/assets/js/8.918b490b.js"><link rel="prefetch" href="/assets/js/9.8bf9b569.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5990769d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Mondo</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/前端知识/01.JavaScript/01.基础数据.html" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/docs/VueJS/01.组件通信处理方案.html" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/docs/ReactJS/00.React入门.html" class="nav-link">React</a></li><li class="dropdown-item"><!----> <a href="/docs/TypeScript/01.基础类型与联合类型.html" class="nav-link">TypeScript</a></li><li class="dropdown-item"><!----> <a href="/docs/小程序/01.小程序项目入坑实践.html" class="nav-link">小程序</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/webpack/00.webpack基础.html" class="nav-link">Webpack</a></li><li class="dropdown-item"><!----> <a href="/docs/Notes/01.公司面试系列.html" class="nav-link">Notes</a></li><li class="dropdown-item"><!----> <a href="/docs/工程化/01.cmder.html" class="nav-link">工程化</a></li></ul></div></div><div class="nav-item"><a href="/docs/NodeJS/01.sql语句增减删查.html" class="nav-link">Node</a></div><div class="nav-item"><a href="/guide/" class="nav-link">归档</a></div> <a href="https://github.com/one-pupil/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/前端知识/01.JavaScript/01.基础数据.html" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/docs/VueJS/01.组件通信处理方案.html" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/docs/ReactJS/00.React入门.html" class="nav-link">React</a></li><li class="dropdown-item"><!----> <a href="/docs/TypeScript/01.基础类型与联合类型.html" class="nav-link">TypeScript</a></li><li class="dropdown-item"><!----> <a href="/docs/小程序/01.小程序项目入坑实践.html" class="nav-link">小程序</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/webpack/00.webpack基础.html" class="nav-link">Webpack</a></li><li class="dropdown-item"><!----> <a href="/docs/Notes/01.公司面试系列.html" class="nav-link">Notes</a></li><li class="dropdown-item"><!----> <a href="/docs/工程化/01.cmder.html" class="nav-link">工程化</a></li></ul></div></div><div class="nav-item"><a href="/docs/NodeJS/01.sql语句增减删查.html" class="nav-link">Node</a></div><div class="nav-item"><a href="/guide/" class="nav-link">归档</a></div> <a href="https://github.com/one-pupil/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/docs/webpack/00.webpack基础.html" class="sidebar-link">webpack基础</a></li><li><a href="/docs/webpack/01.项目打包优化方案.html" class="sidebar-link">项目打包优化方案</a></li><li><a href="/docs/webpack/02.webpack多页应用打包.html" class="sidebar-link">webpack多页应用打包</a></li><li><a href="/docs/webpack/03.webpack与ESLint 结合.html" class="sidebar-link">webpack与ESLint 结合</a></li><li><a href="/docs/webpack/04.webpack打包库和组件.html" class="sidebar-link">webpack打包库和组件</a></li><li><a href="/docs/webpack/05.webpack实现SSR打包.html" class="sidebar-link">webpack实现SSR打包</a></li><li><a href="/docs/webpack/06.优化命令行和构建捕获.html" class="sidebar-link">优化命令行和构建捕获</a></li><li><a href="/docs/webpack/07.构建配置包设计.html" class="active sidebar-link">构建配置包设计</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/webpack/07.构建配置包设计.html#构建配置抽离成-npm-包的意义" class="sidebar-link">构建配置抽离成 npm 包的意义</a></li><li class="sidebar-sub-header"><a href="/docs/webpack/07.构建配置包设计.html#可选方案" class="sidebar-link">可选方案</a></li><li class="sidebar-sub-header"><a href="/docs/webpack/07.构建配置包设计.html#设计" class="sidebar-link">设计</a></li><li class="sidebar-sub-header"><a href="/docs/webpack/07.构建配置包设计.html#webpack-merge-组合配置" class="sidebar-link">webpack-merge 组合配置</a></li><li class="sidebar-sub-header"><a href="/docs/webpack/07.构建配置包设计.html#冒烟测试" class="sidebar-link">冒烟测试</a></li><li class="sidebar-sub-header"><a href="/docs/webpack/07.构建配置包设计.html#持续集成" class="sidebar-link">持续集成</a></li></ul></li><li><a href="/docs/webpack/08.loader开发.html" class="sidebar-link">loader开发</a></li><li><a href="/docs/webpack/09.webpack插件的开发.html" class="sidebar-link">webpack插件的开发</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="构建配置包设计"><a href="#构建配置包设计" class="header-anchor">#</a> 构建配置包设计</h1> <h2 id="构建配置抽离成-npm-包的意义"><a href="#构建配置抽离成-npm-包的意义" class="header-anchor">#</a> 构建配置抽离成 npm 包的意义</h2> <ul><li>通用性
<ul><li>业务开发者无需关注构建配置，提升开发效率</li> <li>统一团队构建脚本</li></ul></li> <li>可维护性
<ul><li>构建配置合理的拆分</li> <li>文档，REARME文档，ChangeLog文档</li></ul></li> <li>质量
<ul><li>冒烟测试，单元测试，测试覆盖率</li> <li>持续集成</li></ul></li></ul> <h2 id="可选方案"><a href="#可选方案" class="header-anchor">#</a> 可选方案</h2> <ul><li>通过多个配置文件管理不同环境的构建，webpack --config 参数进行控制</li> <li>将构建配置设计成一个库，比如：hjs-webpack</li> <li>抽成一个工具进行管理，比如：create-react-app</li> <li>将所有的配置放在一个文件，通过 --env 参数控制分支选择</li></ul> <h2 id="设计"><a href="#设计" class="header-anchor">#</a> 设计</h2> <p>通过多个配置文件管理不同环境配置</p> <ul><li><p>基础配置：webpack.base.js</p></li> <li><p>开发环境：webpack.dev.js</p></li> <li><p>生成环境：webpack.prod.js</p> <p>...</p></li></ul> <p>抽离成一个 npm 包统一管理</p> <ul><li>规范：git commit 日志，README，ESLint 规范，Semver规范</li> <li>质量：冒烟测试，单元测试，测试覆盖率和 CI</li></ul> <h2 id="webpack-merge-组合配置"><a href="#webpack-merge-组合配置" class="header-anchor">#</a> webpack-merge 组合配置</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>baseConfig<span class="token punctuation">,</span> devConfig<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="冒烟测试"><a href="#冒烟测试" class="header-anchor">#</a> 冒烟测试</h2> <p>冒烟测试是指提交测试的软件在进行详细深入的测试之前而进行的预测试</p> <p>主要目的</p> <ul><li>暴露导致软件需要重新发布的基本功能失效等严重问题</li></ul> <h3 id="冒烟测试执行"><a href="#冒烟测试执行" class="header-anchor">#</a> 冒烟测试执行</h3> <ul><li>构建是否成功</li> <li>每次构建完成 build 目录是否有内容输出
<ul><li>是否有 JS、CSS 等静态文件</li> <li>是否有 HTML 文件</li></ul></li></ul> <h2 id="持续集成"><a href="#持续集成" class="header-anchor">#</a> 持续集成</h2> <p>优点</p> <ul><li>快速发现错误</li> <li>防止分支大幅度偏离主干</li></ul> <p>代码集成到主干之前，必须通过自动化测试。只要有一个测试用例失败，就不能集成</p> <p><a href="">代码参考</a></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新于:</span> <span class="time">2/12/2020, 8:50:45 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/webpack/06.优化命令行和构建捕获.html" class="prev">优化命令行和构建捕获</a></span> <span class="next"><a href="/docs/webpack/08.loader开发.html">loader开发</a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.9950f38e.js" defer></script><script src="/assets/js/2.fbe0ca66.js" defer></script><script src="/assets/js/35.ccdf25ee.js" defer></script>
  </body>
</html>
